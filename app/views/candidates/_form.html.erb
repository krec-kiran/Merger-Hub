<%= javascript_include_tag "user-candidate" %>
<div class="col-md-12">
  <div class="col-md-6">
    <div class="form-group">
      <%= f.label :name, class: "control-label col-sm-4" do %>
      Name <i class="fa fa-star"></i>
      <% end %>
      <div class="col-sm-8">
      <% if @user.present? %>
        <%= f.text_field :name, class: "form-control", value: @user.full_name, readonly: true %>
        <%= f.hidden_field :user_id, value: @user.id %>
      <% else %>
          <%= f.text_field :name, class: "form-control", readonly: true %>
          <%= f.hidden_field :user_id %>
      <% end %>
      </div>
    </div>
    <div class="form-group">
      <%= f.label :email, class: "control-label col-sm-4" do %>
      Email <i class="fa fa-star"></i>
      <% end %>
      <div class="col-sm-8">
      <% if @user.present? %>
        <%= f.email_field :email, class: "form-control", value: @user.email, readonly: true %>
      <% else %>
          <%= f.email_field :email, class: "form-control", readonly: true %>
      <% end %>
      </div>
    </div>
    <div class="form-group">
      <%= f.label :street, class: "control-label col-sm-4" do %>
      Street
      <% end %>
      <div class="col-sm-8">
        <%= f.text_field :street, class: "form-control" %>
      </div>
    </div>
    <div class="form-group">
      <%= f.label :city, class: "control-label col-sm-4" do %>
      City <i class="fa fa-star"></i>
      <% end %>
      <div class="col-sm-8">
        <%= f.text_field :city, class: "form-control" %>
      </div>
    </div>
    <div class="form-group">
      <%= f.label :state, class: "control-label col-sm-4" do %>
      State
      <% end %>
      <div class="col-sm-8">
        <%= f.text_field :state, class: "form-control" %>
      </div>
    </div>
    <div class="form-group">
      <%= f.label :country, class: "control-label col-sm-4" do %>
      Country <i class="fa fa-star"></i>
      <% end %>
      <div class="col-sm-8">
        <%= f.text_field :country, class: "form-control" %>
      </div>
    </div>
    <div class="form-group">
      <%= f.label :language, class: "control-label col-sm-4" do %>
      Language
      <% end %>
      <div class="col-sm-8">
        <%= f.text_field :language, class: "form-control", 'data-role' => "tagsinput" %>
      </div>
    </div>
    <div class="form-group">
      <%= f.label :company_id, class: "control-label col-sm-4" do %>
      Company <i class="fa fa-star"></i>
      <% end %>
      <div class="col-sm-8">
        <%= f.select(:company_id, Company.all.collect {|u| [u.name, u.id]}, { :prompt => 'Please Select'} , { class: "form-control" }) %>
      </div>
    </div>
    <div class="form-group">
      <%= label_tag '','', class: "control-label col-sm-4" %>
      <div class="col-sm-8">
        or
      </div>
    </div>
    <div class="form-group">
      <%= label_tag 'Create new company','', class: "control-label col-sm-4" %>
      <div class="col-sm-8">
        <a class="btn btn-info fa fa-plus" data-toggle="modal" data-target="#myModal" title="Add Company" id="add_company"></a>
      </div>
    </div>
    <div class="form-group new-company-div">
      <%= label_tag '','New company', class: "control-label col-sm-4" %>
      <div class="col-sm-8">
        <input class="form-control" id="new-company-input" type="text" disabled="true" value="hello">
      </div>
    </div>
    <div class="form-group">
      <%= f.label :designation, class: "control-label col-sm-4" %>
      <div class="col-sm-8">
        <%= f.text_field :designation, class: "form-control" %>
      </div>
    </div>
    </div>
    <div class="col-md-6">
    <div class="form-group">
      <%= f.label 'Profile', class: "control-label col-sm-4" %>
      <div class="col-sm-8">
        <%= f.text_area :bio, class: "form-control" %>
      </div>
    </div>
    <div class="form-group">
      <%= f.label 'Skills', class: "control-label col-sm-4" %>
      <div class="col-sm-8">
        <%= f.text_field :skills, class: "form-control", 'data-role' => "tagsinput" %>
      </div>
    </div>
    <div class="form-group">
      <%= f.label :work_history, class: "control-label col-sm-4" %>
      <div class="col-sm-8">
        <%= f.text_field :work_history, class: "form-control" %>
      </div>
    </div>
    <div class="form-group">
      <%= f.label 'Industry Speciality', class: "control-label col-sm-4" %>
      <div class="col-sm-8">
        <%= f.text_field :industry_specialty, class: "form-control" %>
      </div>
    </div>
     <div class="form-group">
      <%= f.label :board_member, class: "control-label col-sm-4" %>
      <div class="col-sm-8">
        <%= f.text_field :board_member, class: "form-control" %>
      </div>
    </div>
     <div class="form-group">
      <%= f.label :education, class: "control-label col-sm-4" %>
      <div class="col-sm-8">
        <%= f.text_field :education, class: "form-control" %>
      </div>
    </div>
    <div class="form-group">
      <%= f.label :phone, class: "control-label col-sm-4" do %>
      Phone
      <% end %>
      <div class="col-sm-8">
        <%= f.text_field :phone, class: "form-control" %>
      </div>
    </div>
    <div class="form-group">
      <%= f.label :joined, class: "control-label col-sm-4" %>
      <div class="col-sm-8">
        <%= f.text_field :joined, class: "form-control" %>
      </div>
    </div>


    <div class="modal fade" id="myModal" role="dialog">
      <div class="modal-dialog">

        <!-- Modal content-->
        <div class="modal-content">
          <div class="modal-header">
            <button type="button" class="close" data-dismiss="modal">&times;</button>
            <h4 class="modal-title">New company</h4>
          </div>
          <div class="modal-body" style="padding: 27px;">


            <div class="form-group">
            <%= f.label :name, class: "control-label col-sm-4" do %>
              Name <i class="fa fa-star"></i>
              <% end %>
              <div class="col-sm-8">
                <%= text_field_tag :company_name, '', class: "removeVal form-control" %>
              </div>
            </div>
            <div class="form-group">
              <%= f.label :sector, class: "control-label col-sm-4" do %>
              Sector <i class="fa fa-star"></i>
              <% end %>
              <div class="col-sm-8">
              <%= select_tag "sector", options_from_collection_for_select(Sector.all, "id", "name"), :class => "removeVal form-control", :prompt => "Please select" %>

              </div>
            </div>
            <div class="form-group">
              <%= f.label :company_type, class: "control-label col-sm-4" do %>
              Company Type <i class="fa fa-star"></i>
              <% end %>
              <div class="col-sm-8">
              <%= select_tag "company_type", options_from_collection_for_select(CompanyType.all, "id", "name"), :class => "removeVal form-control", :prompt => "Please select" %>
              </div>
            </div>
            <div class="form-group">
              <%= f.label :website, class: "control-label col-sm-4" do %>
              Website <i class="fa fa-star"></i>
              <% end %>
              <div class="col-sm-8">
                <%= text_field_tag :website,'', class: "removeVal form-control" %>
              </div>
            </div>
            <div class="form-group">
              <%= f.label :city, class: "control-label col-sm-4" do %>
              City <i class="fa fa-star"></i>
              <% end %>
              <div class="col-sm-8">
                <%= text_field_tag :city,'', class: "removeVal form-control" %>
              </div>
            </div>
            <div class="form-group">
              <%= f.label :country, class: "control-label col-sm-4" do %>
              Country <i class="fa fa-star"></i>
              <% end %>
              <div class="col-sm-8">
                <%= text_field_tag :country,'', class: "removeVal form-control" %>
              </div>
            </div>
            <div class="form-group">
              <%= f.label :landline, class: "control-label col-sm-4" do %>
              Landline <i class="fa fa-star"></i>
              <% end %>
              <div class="col-sm-8">
                <%= text_field_tag :landline,'', class: "removeVal form-control",  autocomplete: "false" %>
              </div>
            </div>


          </div>
          <div class="modal-footer">
          <button type="button" class="btn btn-default" id="close-company-info" data-dismiss="modal">Cancel</button>
            <button type="button" id="save-company-info" class="btn btn-success">Save</button>
          </div>
        </div>
      </div>
    </div>


  </div>
</div>

<div class="form-group">
  <div class="col-sm-offset-4 col-sm-5">
    <%= f.submit 'Save', class: "btn btn-success" %>
    <%= link_to 'Back', admin_candidates_path, class: "btn btn-default" %>
  </div>
</div>

<script>
$(".new-company-div").hide();
$("#add_company").click(function(){
  $("#candidate_company_id").val("");
})
$("#candidate_company_id").change(function(){
  if($("#candidate_company_id") != ""){
    $(".removeVal").val("");
    $(".new-company-div").hide();
    $("#new-company-input").val("hello");
  }
})

$("#save-company-info").click(function(){
  var elements = [];
  $('#company_name, #company_type, #sector, #website, #city, #country, #landline').each(function(index, element) {
    if(element.value == ""){
      elements.push(element.name)
      toastr.error(element.name.replace("_", " ") + ' field is required');
    }
  });
  if(elements.length == 0){
    if($("#company_name").val() != "hello"){
      $(".new-company-div").show();
      $("#new-company-input").val($("#company_name").val());
    }
    if($("#website").valid() == true && $("#landline").valid() == true){
      toastr.success('New company added successfully.');
      $("#myModal").modal('hide');
    }
  }
})

$("#close-company-info").click(function(){
  $(".removeVal").val("");
  $(".new-company-div").hide();
  $("#new-company-input").val("hello");
});
</script>
